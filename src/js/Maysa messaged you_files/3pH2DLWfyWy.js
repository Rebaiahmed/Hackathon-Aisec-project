if (self.CavalryLogger) { CavalryLogger.start_js(["47uDm"]); }

__d("FBStoriesSpotlightViewer.react",["cx","ContextualThing","Event","React","ReactLayer","Spotlight.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").createElement(b("Spotlight.react"),{onHide:this.props.onHide,shown:!0,key:"photoLayer",behaviors:[h]},b("React").createElement("div",{className:"_n3"},this.props.children))};return c}(b("React").PureComponent);var h=function(){__p&&__p();function a(a){this.$1=a}var c=a.prototype;c.enable=function(){var a=this;this.$2=b("Event").listen(this.$1.getRoot(),"click",function(b){return a.$3(b)},b("Event").Priority.URGENT)};c.$3=function(a){var c=this.$1.getContentRoot();a=a.getTarget();if(b("ContextualThing").containsIncludingLayers(c,a))return;this.$1.inform("blur",{target:a})};c.disable=function(){this.$2.remove()};return a}();e.exports=a}),null);
__d("FBStoriesGroupAdminActions",["AsyncRequest","CameraPostBucketOwnerHelper","CameraPostThreadOwnerHelper","CurrentUser","FBStoriesGraphQLAPI","GroupMemberActionSource","QE2Logger","UFIMemberMuteDialog","XGroupsMuteMembersController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={showMuteFromGroupDialog:function(a,c,d){__p&&__p();var e=this;b("QE2Logger").logExposureForUser("groups_muting_time_ranges");d=b("CameraPostThreadOwnerHelper").getName(c);var f=b("CameraPostThreadOwnerHelper").getId(c);if(!d||f===null||f===void 0)return;var g=function(d,e){var f=b("XGroupsMuteMembersController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(f).setData({group_id:a.id,user_id:c.id,custom_expiration:e,mute_duration:d,should_reload:!1,source:b("GroupMemberActionSource").GROUP_STORY}).send()};b("UFIMemberMuteDialog").show(function(b,d){g(b,d),e._onMuteFromGroupConfirmed(a,c)},d)},_onMuteFromGroupConfirmed:function(a,c){c=b("CameraPostThreadOwnerHelper").getId(c);if(c===null||c===void 0)return;b("CameraPostBucketOwnerHelper").setIsMutedFromGroup(a,c,!0)},unmuteFromGroup:function(a,c){var d=b("CameraPostBucketOwnerHelper").getId(a);c=b("CameraPostThreadOwnerHelper").getId(c);if(c===null||c===void 0)return;b("FBStoriesGraphQLAPI").unmuteFromGroup(b("CurrentUser").getID(),d,c);b("CameraPostBucketOwnerHelper").setIsMutedFromGroup(a,c,!1)}};e.exports=a}),null);
__d("FBStoryContainer.react",["CameraPostMediaHelper","CurrentUser","ErrorBoundary.react","FBStoriesActions","FBStoriesCurrentThreadDataHelper","FBStoriesGroupAdminActions","FBStoriesLoggingConstants","FBStoriesStore","FBStoryThread.react","FluxContainer","React","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={allowedNavType:"NEXT_ONLY",bucketID:null,canUserReportThreadToFacebook:!1,currentThreadIndex:0,currentThreadData:null,currentThreadID:null,threadsCount:0,threadViewers:{hasNewViewers:!1,friends:[],connections:[],nonFriendsCount:0,totalCount:0,totalNew:0},bucketOwner:{id:"",name:"",short_name:"",gender:"",is_viewer_friend:!1,profile_picture:null,is_employee:!1},userInfo:{userID:b("CurrentUser").getID(),userName:b("CurrentUser").getName()},allBucketsViewed:!1,shouldDisableReply:!1,isOwnThread:!1,isStoryUploading:!1,isUserManagedThread:!1,isUserManagedBucket:!1,isGroupAdminBucket:!1,hasPendingThreads:!1,showPausedOverlay:!1,showStoryUI:!0,isBucketLive:!1,isLandscape:!1,isSelectedBucketLiveAndEnded:!1,isThreadReviewStatusPending:!1,threadOverlays:[],viewerEntrypoint:null},d.$1=function(){var a=d.state.currentThreadID,c=d.state.bucketID;a&&c&&b("FBStoriesActions").deleteThreadFromBucket(a,c)},d.$2=function(){b("FBStoriesActions").muteBucketOwner(d.state.bucketOwner,d.state.bucketID)},d.$5=function(){var a=d.state.currentThreadID;a&&b("FBStoriesActions").reportThreadToAdmin(a)},d.$3=function(){if(!d.state.currentThreadData||d.state.currentThreadData.isLive)return;var a=d.state.currentThreadData.bucketOwner,c=d.state.currentThreadData.threadOwner,e=d.state.currentThreadData.threadID;if(!a||!c)return;b("FBStoriesGroupAdminActions").showMuteFromGroupDialog(a,c,e)},d.$4=function(){if(!d.state.currentThreadData||d.state.currentThreadData.isLive)return;var a=d.state.currentThreadData.bucketOwner,c=d.state.currentThreadData.threadOwner;if(!a||!c)return;b("FBStoriesGroupAdminActions").unmuteFromGroup(a,c)},d.$6=function(a){var c=d.state.currentThreadID;c&&b("FBStoriesActions").takeNegativeFeedbackAction(c,a)},d.$7=function(){d.state.allowedNavType!=="PREV_ONLY"?b("FBStoriesActions").nextThread():d.props.onDone()},d.$8=function(){d.state.allowedNavType!=="NEXT_ONLY"&&b("FBStoriesActions").prevThread()},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(){return[b("FBStoriesStore")]};c.calculateState=function(a){a=b("FBStoriesStore").getCurrentThreadViewers();var c=b("FBStoriesStore").isOwnThread(),d=b("FBStoriesStore").getCurrentThreadStatusForSelectedBucket()==="UPLOADING",e=b("FBStoriesStore").isCurrentThreadUserManaged(),f=b("FBStoriesStore").isCurrentBucketUserManaged(),g=b("FBStoriesStore").isCurrentBucketGroupAdmin(),h=b("FBStoriesStore").hasPendingThreads(),i=b("FBStoriesStore").getCurrentThreadData(),j=b("FBStoriesCurrentThreadDataHelper").getCameraPostMedia(i),k=b("CameraPostMediaHelper").getHeight(j);j=b("CameraPostMediaHelper").getWidth(j);k=k<j;j={bucketID:b("FBStoriesStore").getSelectedBucketId(),canOpenCurrentThreadViewerSheet:b("FBStoriesStore").canOpenCurrentThreadViewerSheet(),canSeeCurrentThreadViewCount:b("FBStoriesStore").canSeeCurrentThreadViewCount(),canUserReportThreadToFacebook:b("FBStoriesStore").canUserReportCurrentThreadToFacebook(),currentThreadIndex:b("FBStoriesStore").getCurrentThreadIndexForSelectedBucket(),currentThreadPercentDone:b("FBStoriesStore").getCurrentThreadPercentDone(),currentThreadID:b("FBStoriesStore").getCurrentThreadIDForSelectedBucket(),threadsCount:b("FBStoriesStore").getThreadCountForSelectedBucket(),threadOverlays:b("FBStoriesStore").getCurrentThreadOverlays(),bucketOwner:b("FBStoriesStore").getSelectedBucketOwner(),userInfo:b("FBStoriesStore").getUserInfo(),allBucketsViewed:b("FBStoriesStore").areAllBucketsViewed(),shouldDisableReply:b("FBStoriesStore").shouldDisableReply(),currentThreadData:i,isOwnThread:c,isStoryUploading:d,isUserManagedThread:e,isUserManagedBucket:f,isGroupAdminBucket:g,hasPendingThreads:h,threadViewers:a,allowedNavType:b("FBStoriesStore").getAllowedNavigationType(),isBucketLive:b("FBStoriesStore").isSelectedBucketLive(),isLandscape:k,isSelectedBucketLiveAndEnded:b("FBStoriesStore").isSelectedBucketLiveAndEnded(),isThreadReviewStatusPending:b("FBStoriesStore").isCurrentThreadReviewStatusPending(),viewerEntrypoint:b("FBStoriesStore").getCurrentViewerEntrypoint()};return j};var d=c.prototype;d.render=function(){return b("React").createElement(b("ErrorBoundary.react"),null,b("React").createElement(b("FBStoryThread.react"),babelHelpers["extends"]({},this.props,this.state,{canShowProduction:b("gkx")("678359"),onDeleteCurrentThread:this.$1,onMuteBucketOwner:this.$2,onMuteMemberFromGroup:this.$3,onUnmuteMemberFromGroup:this.$4,onReportCurrentThreadToAdmin:this.$5,onTakeNegativeFeedbackAction:this.$6,onNextThread:this.$7,onPrevThread:this.$8,onTimeUpdate:this.$9,storyActionSource:b("FBStoriesLoggingConstants").SOURCES.STORY_TRAY})))};d.$9=function(a){b("FBStoriesActions").updateCurrentThreadPercentDone(a)};return c}(b("React").Component);e.exports=b("FluxContainer").create(a)}),null);
__d("FBStoriesTheater.react",["cx","FBStoriesSpotlightViewer.react","FBStoryContainer.react","Focus","Keys","React","SpotlightViewerClose"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$2=function(a){a.nativeEvent.keyCode===b("Keys").RETURN&&d.props.onClose()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=this;return b("React").createElement(b("FBStoriesSpotlightViewer.react"),{onHide:this.props.onHide},b("React").createElement(b("SpotlightViewerClose"),{isFixed:!0,position:"right",onClick:this.props.onClose,onKeyPress:this.$2}),b("React").createElement("div",{className:"uiContextualLayerParent",ref:function(b){return a.$1=b}},b("React").createElement(b("FBStoryContainer.react"),{onDone:this.props.onDone,enableNavigation:!0,isStoryMuted:this.props.isStoryMuted,onClickMute:this.props.onMute,onCloseRequested:this.props.onHide,openComposerForProduction:this.props.openComposerForProduction})))};return c}(b("React").Component);e.exports=a}),null);
__d("FBStoriesTheaterContainer.react",["FBStoriesActions","FBStoriesLiveVideoActions","FBStoriesLoggingConstants","FBStoriesLoggingHelper","FBStoriesStore","FBStoriesTheater.react","FBStoriesViewerHelper","FluxContainer","React","UFIRootRegistry"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={isStoryMuted:!1,currentThreadID:null,isOwnBucket:!1,selectedBucketIsLive:!1};a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),h=0;h<e;h++)f[h]=arguments[h];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=b("FBStoriesLoggingConstants").SOURCE_CLOSE_FROM_MODAL,d.$2=b("FBStoriesLoggingConstants").GESTURES.CLOSE_STORY.CLOSE_BUTTON_EXIT,d.state=g,d.$4=function(){d.$1=b("FBStoriesLoggingConstants").SOURCE_CLOSE_FROM_MODAL_CLOSE_BUTTON,d.$2=b("FBStoriesLoggingConstants").GESTURES.CLOSE_STORY.CLOSE_BUTTON_EXIT,b("FBStoriesViewerHelper").toggleViewer(!1,null)},d.$5=function(){d.$1=b("FBStoriesLoggingConstants").SOURCE_CLOSE_FROM_LAST_STORY_FINISHING,d.$2=b("FBStoriesLoggingConstants").GESTURES.CLOSE_STORY.AUTO_EXIT,b("FBStoriesLoggingHelper").closeStoryLog(d.$2,d.$1),b("FBStoriesViewerHelper").toggleViewer(!1,null)},d.$6=function(){d.setState(function(a){return{isStoryMuted:!a.isStoryMuted}})},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(){return[b("FBStoriesStore")]};c.calculateState=function(a){return!b("FBStoriesStore").isViewerOpen()?a?a:g:{isStoryMuted:a?a.isStoryMuted:!1,currentThreadID:b("FBStoriesStore").getCurrentThreadIDForSelectedBucket(),isOwnBucket:b("FBStoriesStore").isOwnBucket(),selectedBucketIsLive:b("FBStoriesStore").isSelectedBucketLive()}};var d=c.prototype;d.render=function(){return b("React").createElement(b("FBStoriesTheater.react"),{onHide:this.$3.bind(this),onClose:this.$4,onDone:this.$5,onMute:this.$6,isStoryMuted:this.state.isStoryMuted,openComposerForProduction:this.props.openComposerForProduction})};d.$3=function(){this.$2!==b("FBStoriesLoggingConstants").GESTURES.CLOSE_STORY.AUTO_EXIT&&b("FBStoriesLoggingHelper").closeStoryLog(this.$2,this.$1),b("FBStoriesViewerHelper").toggleViewer(!1,null),this.$7()};d.$7=function(){b("FBStoriesActions").markCurrentThreadAsSeen(),this.state.selectedBucketIsLive&&b("FBStoriesActions").removeEndedLiveVideo(),b("FBStoriesActions").unselectBucket(),b("FBStoriesLiveVideoActions").removeUIComponents(),b("UFIRootRegistry").cleanupSnowliftNodes(),this.props.onClose()};return c}(b("React").Component);e.exports=b("FluxContainer").create(a)}),null);
__d("FBStoriesViewer",["DOM","FBStoriesProductionActions","FBStoriesTheaterContainer.react","React","ReactDOM","Run"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="fb_stories_theater";a=function(){__p&&__p();a.getInstance=function(){this.$3||(a.$3=new a());return a.$3};function a(){__p&&__p();var a=this;this.close=function(){if(a.$1===!1)return;a.$1=!1;b("ReactDOM").unmountComponentAtNode(a.$2)};this.$1=!1;this.$2=b("DOM").create("div",{id:g});document.body&&document.body.appendChild(this.$2);b("Run").onLeave(this.close)}var c=a.prototype;c.toggle=function(a){a?this.open():this.close()};c.open=function(){if(this.$1)return;this.$1=!0;b("ReactDOM").render(b("React").createElement(b("FBStoriesTheaterContainer.react"),{openComposerForProduction:this.openComposerForProduction,onClose:this.close}),this.$2)};c.openComposerForProduction=function(){b("FBStoriesProductionActions").openProductionDialog()};return a}();e.exports=a}),null);